<table>
  <thead>
    <tr>
      <th></th>
      <th>Item Image</th>
      <th>Item</th>
      <th>Quantity</th>
      <th>Price Each</th>
      <th>Item Total</th>
    </tr>
  </thead>
  <tbody>
    @for(item of cartItems(); track item.id) {
      <tr>
        <td><button (click)="cartService.removeItemFromCart(item.id)">-</button> Adjust Totals <button (click)="cartService.addItemToCart(item.id)">+</button></td>
        <td><img [src]="item.imageThumbnail" width="50" height="50" alt=""/></td>
        <td>{{ item.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.price | currency }}</td>
        <td>{{ (item.price * item.quantity) | currency  }}</td>
      </tr>
    } @empty() {
      <tr>
        <td colspan="6">Your cart is empty - <button (click)="cartService.addItemToCart('sci-1')">Add a Super Cool Item</button></td>
      </tr>
    }
    <tr>
        <td colspan="5">
          <app-timezone-selector/>
        </td>
        <td>
            <div class="shipping-methods">
            @for(method of shippingService.shippingMethods.value()?.options; track method.name) {
                <div>
                    <input 
                      type="radio" id="i" name="shippingMethod" 
                      value="shippingMethod" 
                      (click)="shippingService.shippingMethod.set(method)" 
                      [checked]="method.name === shippingService.shippingMethod()?.name"
                    />
                    <label for="i">{{ method.name}} -  {{method.price | currency}}</label>
                </div>
            } @empty {
                <p>Loading...</p>
            }
            </div>
        </td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
        <td colspan="5">Subtotal</td>
        <td>{{ cartService.cartTotals().subtotal | currency  }}</td>
    </tr>
    <tr>
      <td colspan="5">Tax</td>
      <td>{{ cartService.cartTotals().tax | currency  }}</td>
    </tr>
    <tr>
      <td colspan="5">Shipping</td>
      @if(cartService.cartTotals().shipping > 0){
        <td>{{ cartService.cartTotals().shipping | currency  }}</td>
      } @else {
        <td class="warning">Please Select a Shipping Method</td>
      }
    </tr>
    <tr>
      <td colspan="5">Total</td>
      <td>{{ cartService.cartTotals().total | currency  }}</td>
    </tr>
  </tfoot>
</table>
