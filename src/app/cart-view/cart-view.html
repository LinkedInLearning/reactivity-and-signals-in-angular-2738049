<table>
  <thead>
    <tr>
      <th></th>
      <th>Item Image</th>
      <th>Item</th>
      <th>Quantity</th>
      <th>Price Each</th>
      <th>Item Total</th>
    </tr>
  </thead>
  <tbody>
    @for(item of cartItems(); track item.id) {
      <tr>
        <td><button (click)="addToCart(item.id)">Add {{item.name}} to Cart</button></td>
        <td><img [src]="item.imageThumbnail" width="50" height="50"/></td>
        <td>{{ item.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.price | currency }}</td>
        <td>{{ (item.price * item.quantity) | currency  }}</td>
      </tr>
    }
    <tr>
        <td colspan="5">
            <p>Shipping Method - Select Time Zone for Shipping Costs</p>
            <div class="shipping-methods">
              <div>
                <input type="radio" id="eastern" name="timezone" value ="timezone" (click)="changeShippingOptions('eastern')" checked/>
                <label for="i">Eastern Time Zone</label>
              </div>
              <div>
                <input type="radio" id="central" name="timezone" value ="timezone" (click)="changeShippingOptions('central')" />
                <label for="i">Central Time Zone</label>
              </div>
              <div>
                <input type="radio" id="mountain" name="timezone" value ="timezone" (click)="changeShippingOptions('mountain')" />
                <label for="i">Mountain Time Zone</label>
              </div>
              <div>
                <input type="radio" id="pacific" name="timezone" value ="timezone" (click)="changeShippingOptions('pacific')" />
                <label for="i">Pacific Time Zone</label>
              </div>
            </div>
        </td>
        <td>
            <div class="shipping-methods">
            @for(method of shippingMethods()?.options; track method.name) {
                <div>
                    <input 
                      type="radio" id="i" name="shippingMethod" 
                      value="shippingMethod" 
                      (click)="updateShippingMethod(method)" 
                      [checked]="method.name === shippingService.shippingMethod()?.name"
                    />
                    <label for="i">{{ method.name}} -  {{method.price | currency}}</label>
                </div>
            } @empty {
                <p>Loading...</p>
            }
            </div>
        </td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
        <td colspan="5">Subtotal</td>
        <td>{{ cartService.cartTotals().subtotal | currency  }}</td>
    </tr>
    <tr>
      <td colspan="5">Tax</td>
      <td>{{ cartService.cartTotals().tax | currency  }}</td>
    </tr>
    <tr>
      <td colspan="5">Shipping</td>
      @if(cartService.cartTotals().shipping > 0){
        <td>{{ cartService.cartTotals().shipping | currency  }}</td>
      } @else {
        <td class="warning">Please Select a Shipping Method</td>
      }
    </tr>
    <tr>
      <td colspan="5">Total</td>
      <td>{{ cartService.cartTotals().total | currency  }}</td>
    </tr>
  </tfoot>
</table>
